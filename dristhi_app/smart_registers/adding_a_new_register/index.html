
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>Adding a new register to the app  | Project Dristhi</title>

	<meta name="author" content="Project Dristhi">

<meta name="description" content="How to add a new register to the app The following steps are involved in adding a new register to the app (Please note: This documentation is written &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="" rel="alternate" title="Project Dristhi" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/dristhi-documentation/favicon.png" rel="shortcut icon">
	<link href="/dristhi-documentation/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/dristhi-documentation/">Project Dristhi</a></h1>
<span class="tagline">Documentation for Project Dristhi</span>
<nav id="main-nav"><ul>

</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>

</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="page">
    <div class="entry-content"><h1>How to add a new register to the app</h1>

<p>The following steps are involved in adding a new register to the app</p>

<p>(Please note: This documentation is written for the Android Native Home screen and adding a new native register)</p>

<ul>
<li>The new native has to implemented as per the architecture defined in the <a href="/dristhi-documentation/dristhi_app/smart_registers/architecture_native_registers">Native Register Architecture</a></li>
<li>The UI for the new register shall be defined in the corresponding layout xml file(s)</li>
<li>The Register Activity shall instantiate the necessary controllers and the ClientProviders as required</li>
<li>Once the register has been defined, it needs to be added to the home register for it to be launched</li>
<li>To add a new button to the Home Screen, the description of then new button needs to be added to the layout file for the home screen</li>
<li><p>For example, the EC Register button is defined in the <a href="https://github.com/SEL-Columbia/dristhi-app/blob/master/dristhi-app/res/layout/smart_registers_home.xml#L26-56">smart_registers_home.xml</a> as below:
```xml
<FrameLayout
      android:layout_width="0dp"
      android:layout_height="fill_parent"
      android:layout_weight="1"></p>

<p>  <ImageButton
          android:id="@+id/btn_ec_register"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:src="@drawable/register_ec"
          style="@style/ImageButton.Home.Register"/></p>

<p>  &lt;org.ei.drishti.view.customControls.CustomFontTextView
          android:layout_width=&ldquo;match_parent&rdquo;
          android:layout_height=&ldquo;wrap_content&rdquo;
          android:text=&ldquo;EC&rdquo;
          android:textStyle=&ldquo;bold&rdquo;
          style=&ldquo;@style/CustomFontTextViewStyle.Home.RegisterName&rdquo;/></p>

<p>  &lt;org.ei.drishti.view.customControls.CustomFontTextView
          android:layout_width=&ldquo;match_parent&rdquo;
          android:layout_height=&ldquo;wrap_content&rdquo;
          android:text=&ldquo;REGISTER&rdquo;
          style=&ldquo;@style/CustomFontTextViewStyle.Home.RegisterLabel&rdquo;/></p>

<p>  &lt;org.ei.drishti.view.customControls.CustomFontTextView
          android:id=&ldquo;@+id/txt_ec_register_client_count&rdquo;
          android:layout_width=&ldquo;wrap_content&rdquo;
          android:layout_height=&ldquo;wrap_content&rdquo;
          style=&ldquo;@style/CustomFontTextViewStyle.Badge&rdquo;/>
</FrameLayout>
```</p></li>
<li>Once the new button has been added to the home register, then the corresponding register activity has to be opened when the button is tapped</li>
<li>This can be achived by creating a method in navigation controller which launches the new register activity</li>
<li><p>Then in the <a href="https://github.com/SEL-Columbia/dristhi-app/blob/master/dristhi-app/src/main/java/org/ei/drishti/view/activity/NativeHomeActivity.java#L185-211">NativeHomeActivity</a> the corresponding method is called based on the id of which button is tapped
```java
private View.OnClickListener onRegisterStartListener = new View.OnClickListener() {</p>

<p>  @Override
  public void onClick(View view) {
      switch (view.getId()) {
          case R.id.btn_ec_register:
              navigationController.startECSmartRegistry();
              break;</p>

<pre><code>      case R.id.btn_anc_register:
          navigationController.startANCSmartRegistry();
          break;

      case R.id.btn_pnc_register:
          navigationController.startPNCSmartRegistry();
          break;

      case R.id.btn_child_register:
          navigationController.startChildSmartRegistry();
          break;

      case R.id.btn_fp_register:
          navigationController.startFPSmartRegistry();
          break;
  }
</code></pre>

<p>  }
}
```</p></li>
<li>This would launch the new register</li>
</ul>

</div>
</article>


</div>
	<footer id="footer" class="inner">&copy; 2014

   <a href='#'>Project Dristhi</a>

</footer>
	<script src="/dristhi-documentation/javascripts/slash.js"></script>
<script src="/dristhi-documentation/javascripts/hyphenator.js"></script>







</body>
</html>
